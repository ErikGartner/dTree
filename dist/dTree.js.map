{"version":3,"sources":["dTree.js"],"names":[],"mappings":"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","file":"dTree.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.dTree = factory());\n}(this, (function () { 'use strict';\n\nclass TreeBuilder {\n\n  constructor(root, siblings, opts) {\n    TreeBuilder.DEBUG_LEVEL = opts.debug ? 1 : 0;\n\n    this.root = root;\n    this.siblings = siblings;\n    this.opts = opts;\n\n    // flatten nodes\n    this.allNodes = this._flatten(this.root);\n\n    // Calculate node size\n    let visibleNodes = _.filter(this.allNodes, function(n) {\n      return !n.hidden;\n    });\n    this.nodeSize = opts.callbacks.nodeSize(visibleNodes,\n      opts.nodeWidth, opts.callbacks.textRenderer);\n  }\n\n  create() {\n\n    let opts = this.opts;\n    let allNodes = this.allNodes;\n    let nodeSize = this.nodeSize;\n\n    let width = opts.width + opts.margin.left + opts.margin.right;\n    let height = opts.height + opts.margin.top + opts.margin.bottom;\n\n    let zoom = d3.zoom()\n      .scaleExtent([0.1, 10])\n      .on('zoom', function() {\n        svg.attr('transform', d3.event.transform.translate(width / 2, opts.margin.top));\n      });\n\n    //make an SVG\n    let svg = this.svg = d3.select(opts.target)\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .call(zoom)\n      .append('g')\n      .attr('transform', 'translate(' + width / 2 + ',' + opts.margin.top + ')');\n\n    // Compute the layout.\n    this.tree = d3.tree()\n      .nodeSize([nodeSize[0] * 2, nodeSize[1] * 2.5]);\n\n    this.tree.separation(function separation(a, b) {\n      if (a.data.hidden || b.data.hidden) {\n        return 0.3;\n      } else {\n        return 0.6;\n      }\n    });\n\n    this._update(this.root);\n\n  }\n\n  _update(source) {\n\n    let opts = this.opts;\n    let allNodes = this.allNodes;\n    let nodeSize = this.nodeSize;\n\n    let treenodes = this.tree(source);\n    let links = treenodes.links();\n\n    // Create the link lines.\n    this._linkSiblings(); //  I moved this line before _elbow() for Single parent support\n    this.svg.selectAll('.link')\n      .data(links)\n      .enter()\n      // filter links with no parents to prevent empty nodes\n      .filter(function(l) {\n        return !l.target.data.noParent;\n      })\n      .append('path')\n      .attr('class', opts.styles.linage)\n      .attr('d', this._elbow);\n\n    let nodes = this.svg.selectAll('.node')\n      .data(treenodes.descendants())\n      .enter();\n\n    // Draw siblings (marriage)\n    this.svg.selectAll('.sibling')\n      .data(this.siblings)\n      .enter()\n      .append('path')\n      .attr('class', opts.styles.marriage)\n      .attr('d', _.bind(this._siblingLine, this));\n\n    // Create the node rectangles.\n    nodes.append('foreignObject')\n      .filter(function(d) {\n        return d.data.hidden ? false : true;\n      })\n      .attr('x', function(d) {\n        return d.x - d.cWidth / 2 + 'px';\n      })\n      .attr('y', function(d) {\n        return d.y - d.cHeight / 2 + 'px';\n      })\n      .attr('width', function(d) {\n        return d.cWidth + 'px';\n      })\n      .attr('height', function(d) {\n        return d.cHeight + 'px';\n      })\n      .attr('id', function(d) {\n        return d.id;\n      })\n      .html(function(d) {\n        return opts.callbacks.nodeRenderer(\n          d.data.name,\n          d.x,\n          d.y,\n          nodeSize[0],\n          nodeSize[1],\n          d.data.extra,\n          d.data.id,\n          d.data.class,\n          d.data.textClass,\n          opts.callbacks.textRenderer);\n      })\n      .on('click', function(d)  {\n        if (d.data.hidden) {\n          return;\n        }\n        opts.callbacks.nodeClick(d.data.name, d.data.extra, d.data.id);\n      });\n  }\n\n  _flatten(root) {\n    let n = [];\n    let i = 0;\n\n    function recurse(node) {\n      if (node.children) {\n        node.children.forEach(recurse);\n      }\n      if (!node.id) {\n        node.id = ++i;\n      }\n      n.push(node);\n    }\n    recurse(root);\n    return n;\n  }\n\n  _elbow(d, i) {\n    if (d.target.data.noParent) {\n      return 'M0,0L0,0';\n    }\n    let ny = d.target.y + (d.source.y - d.target.y) * 0.50;\n\n    let linedata = [{\n      x: d.target.x,\n      y: d.target.y\n    }, {\n      x: d.target.x,\n      y: ny\n    }, {\n      x: d.source.x,\n      y: d.source.y\n    }];\n\n    let fun = d3.line().curve(d3.curveStepAfter)\n      .x(function(d) {\n        return d.x;\n      })\n      .y(function(d) {\n        return d.y;\n      });\n    return fun(linedata);\n  }\n\n  _linkSiblings() {\n\n    let allNodes = this.allNodes;\n\n    _.forEach(this.siblings, function(d) {\n      let start = allNodes.filter(function(v) {\n        return d.source.id == v.data.id;\n      });\n      let end = allNodes.filter(function(v) {\n        return d.target.id == v.data.id;\n      });\n      d.source.x = start[0].x;\n      d.source.y = start[0].y;\n      d.target.x = end[0].x;\n      d.target.y = end[0].y;\n\n      let marriageId = (start[0].data.marriageNode != null ?\n                        start[0].data.marriageNode.id :\n                        end[0].data.marriageNode.id);\n      let marriageNode = allNodes.find(function(n) {\n        return n.data.id == marriageId;\n      });\n      d.source.marriageNode = marriageNode;\n      d.target.marriageNode = marriageNode;\n\n      if (_.get(end[0].data, 'hidden', false)) {\n        // Hide horizontal line for hidden spouse\n        d.target.x = start[0].x;\n        d.target.y = start[0].y;\n        marriageNode.x = start[0].x;\n        marriageNode.y = start[0].y;\n      }\n    });\n\n  }\n\n  _siblingLine(d, i) {\n\n    let ny = d.target.y + (d.source.y - d.target.y) * 0.50;\n    let nodeWidth = this.nodeSize[0];\n    let nodeHeight = this.nodeSize[1];\n\n    // Not first marriage\n    if (d.number > 0) {\n      ny -= nodeHeight * 8 / 10;\n    }\n\n    let linedata =\n      d.source.x === d.target.x && d.source.y === d.target.y ?\n        [] : // If spouse is hidden\n        [{ // regular case\n      x: d.source.x,\n      y: d.source.y\n    }, {\n      x: d.source.x + nodeWidth * 6 / 10,\n      y: d.source.y\n    }, {\n      x: d.source.x + nodeWidth * 6 / 10,\n      y: ny\n    }, {\n      x: d.target.marriageNode.x,\n      y: ny\n    }, {\n      x: d.target.marriageNode.x,\n      y: d.target.y\n    }, {\n      x: d.target.x,\n      y: d.target.y\n    }];\n\n    let fun = d3.line().curve(d3.curveStepAfter)\n      .x(function(d) {\n        return d.x;\n      })\n      .y(function(d) {\n        return d.y;\n      });\n    return fun(linedata);\n  }\n\n  static _nodeSize(nodes, width, textRenderer) {\n    let maxWidth = 0;\n    let maxHeight = 0;\n    let tmpSvg = document.createElement('svg');\n    document.body.appendChild(tmpSvg);\n\n    _.map(nodes, function(n) {\n      let container = document.createElement('div');\n      container.setAttribute('class', n.data.class);\n      container.style.visibility = 'hidden';\n      container.style.maxWidth = width + 'px';\n\n      let text = textRenderer(n.data.name, n.data.extra, n.data.textClass);\n      container.innerHTML = text;\n\n      tmpSvg.appendChild(container);\n      let height = container.offsetHeight;\n      tmpSvg.removeChild(container);\n\n      maxHeight = Math.max(maxHeight, height);\n      n.cHeight = height;\n      if (n.data.hidden) {\n        n.cWidth = 0;\n      } else {\n        n.cWidth = width;\n      }\n    });\n    document.body.removeChild(tmpSvg);\n\n    return [width, maxHeight];\n  }\n\n  static _nodeRenderer(name, x, y, height, width, extra, id, nodeClass, textClass, textRenderer) {\n    let node = '';\n    node += '<div ';\n    node += 'style=\"height:100%;width:100%;\" ';\n    node += 'class=\"' + nodeClass + '\" ';\n    node += 'id=\"node' + id + '\">\\n';\n    node += textRenderer(name, extra, textClass);\n    node += '</div>';\n    return node;\n  }\n\n  static _textRenderer(name, extra, textClass) {\n    let node = '';\n    node += '<p ';\n    node += 'align=\"center\" ';\n    node += 'class=\"' + textClass + '\">\\n';\n    node += name;\n    node += '</p>\\n';\n    return node;\n  }\n\n  static _debug(msg) {\n    if (TreeBuilder.DEBUG_LEVEL > 0)  {\n      console.log(msg);\n    }\n  }\n\n}\n\nconst dTree = {\n\n  VERSION: '2.0.2',\n\n  init: function(data, options = {}) {\n\n    var opts = _.defaultsDeep(options || {}, {\n      target: '#graph',\n      debug: false,\n      width: 600,\n      height: 600,\n      callbacks: {\n        nodeClick: function(name, extra, id) {},\n        nodeRenderer: function(name, x, y, height, width, extra, id, nodeClass, textClass, textRenderer) {\n          return TreeBuilder._nodeRenderer(name, x, y, height, width, extra,\n            id,nodeClass, textClass, textRenderer);\n        },\n        nodeSize: function(nodes, width, textRenderer) {\n          return TreeBuilder._nodeSize(nodes, width, textRenderer);\n        },\n        nodeSorter: function(aName, aExtra, bName, bExtra) {return 0;},\n        textRenderer: function(name, extra, textClass) {\n          return TreeBuilder._textRenderer(name, extra, textClass);\n        },\n      },\n      margin: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      nodeWidth: 100,\n      styles: {\n        node: 'node',\n        linage: 'linage',\n        marriage: 'marriage',\n        text: 'nodeText'\n      }\n    });\n\n    var data = this._preprocess(data, opts);\n    var treeBuilder = new TreeBuilder(data.root, data.siblings, opts);\n    treeBuilder.create();\n\n  },\n\n  _preprocess: function(data, opts) {\n\n    var siblings = [];\n    var id = 0;\n\n    var root = {\n      name: '',\n      id: id++,\n      hidden: true,\n      children: []\n    };\n\n    var reconstructTree = function(person, parent) {\n\n      // convert to person to d3 node\n      var node = {\n        name: person.name,\n        id: id++,\n        hidden: false,\n        children: [],\n        extra: person.extra,\n        textClass: person.textClass ? person.textClass : opts.styles.text,\n        class: person.class ? person.class : opts.styles.node\n      };\n\n      // hide linages to the hidden root node\n      if (parent == root) {\n        node.noParent = true;\n      }\n\n      // apply depth offset\n      for (var i = 0; i < person.depthOffset; i++) {\n        var pushNode = {\n          name: '',\n          id: id++,\n          hidden: true,\n          children: [],\n          noParent: node.noParent\n        };\n        parent.children.push(pushNode);\n        parent = pushNode;\n      }\n\n      // sort children\n      dTree._sortPersons(person.children, opts);\n\n      // add \"direct\" children\n      _.forEach(person.children, function(child) {\n        reconstructTree(child, node);\n      });\n\n      parent.children.push(node);\n\n      //sort marriages\n      dTree._sortMarriages(person.marriages, opts);\n\n      // go through marriage\n      _.forEach(person.marriages, function(marriage, index) {\n\n        var m = {\n          name: '',\n          id: id++,\n          hidden: true,\n          noParent: true,\n          children: [],\n          extra: marriage.extra\n        };\n\n        var sp = marriage.spouse;\n\n        var spouse = {\n          name: sp.name,\n          id: id++,\n          hidden: _.get(marriage.spouse, 'hidden', false),\n          noParent: true,\n          children: [],\n          textClass: sp.textClass ? sp.textClass : opts.styles.text,\n          class: sp.class ? sp.class : opts.styles.node,\n          extra: sp.extra,\n          marriageNode: m\n        };\n\n        parent.children.push(m, spouse);\n\n        dTree._sortPersons(marriage.children, opts);\n        _.forEach(marriage.children, function(child) {\n          reconstructTree(child, m);\n        });\n\n        siblings.push({\n          source: {\n            id: node.id\n          },\n          target: {\n            id: spouse.id\n          },\n          number: index\n        });\n      });\n\n    };\n\n    _.forEach(data, function(person) {\n      reconstructTree(person, root);\n    });\n\n    return {\n      root: d3.hierarchy(root),\n      siblings: siblings\n    };\n\n  },\n\n  _sortPersons: function(persons, opts) {\n    if (persons != undefined) {\n      persons.sort(function(a, b) {\n        return opts.callbacks.nodeSorter(a.name, a.extra, b.name, b.extra);\n      });\n    }\n    return persons;\n  },\n\n  _sortMarriages: function(marriages, opts) {\n    if (marriages != undefined && Array.isArray(marriages)) {\n      marriages.sort(function(marriageA, marriageB) {\n        var a = marriageA.spouse;\n        var b = marriageB.spouse;\n        return opts.callbacks.nodeSorter(a.name, a.extra, b.name, b.extra);\n      });\n    }\n    return marriages;\n  }\n\n};\n\nreturn dTree;\n\n})));\n"]}